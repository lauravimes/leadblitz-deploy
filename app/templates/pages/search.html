{% extends "base.html" %}
{% block title %}Search â€” LeadBlitz{% endblock %}

{% block content %}
<h1>Find leads</h1>
<p class="subtext" style="margin-bottom:24px">Search for businesses by type and location</p>

<div class="card">
  <form class="search-form" hx-post="/api/search" hx-target="#results" hx-swap="innerHTML" hx-indicator="#search-indicator">
    <div class="form-group" style="margin-bottom:0">
      <label for="business_type">Business type</label>
      <input type="text" id="business_type" name="business_type" placeholder="plumber, dentist, restaurant..." required>
    </div>
    <div class="form-group" style="margin-bottom:0">
      <label for="location">Location</label>
      <input type="text" id="location" name="location" placeholder="Manchester, London..." required>
    </div>
    <button type="submit" class="btn btn-primary">Search</button>
  </form>
  <span id="search-indicator" class="htmx-indicator" style="margin-top:10px">Searching...</span>
</div>

{% if campaigns %}
<div style="margin-top:32px">
  <p class="label">Recent searches</p>
  {% for c in campaigns %}
  <div class="card card-compact" style="cursor:pointer"
       hx-post="/api/search" hx-target="#results" hx-swap="innerHTML"
       hx-vals='{"business_type":"{{ c.business_type }}","location":"{{ c.location }}","campaign_id":"{{ c.id }}"}'>
    <span style="font-weight:500">{{ c.business_type }}</span>
    <span class="subtext"> in {{ c.location }}</span>
  </div>
  {% endfor %}
</div>
{% endif %}

<div id="results" style="margin-top:24px"></div>
{% endblock %}
